# Wassertech CRM ‚Äî –æ—Ñ—Ñ–ª–∞–π–Ω-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –¢–û —Å–∏—Å—Ç–µ–º –≤–æ–¥–æ–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏  

> **–°–æ—Å—Ç–æ—è–Ω–∏–µ:** Handover #7 (—Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ —Å–ª–∏—è–Ω–∏—è –≤–µ—Ç–∫–∏ `dynamic-templates`, –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π —ç–∫—Ä–∞–Ω –ö–ª–∏–µ–Ω—Ç—ã –∏ –Ω–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥—Ä—É–ø–ø)

---

## 1) –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Package:** `com.example.wassertech`  
- **Min SDK:** 26‚ÄÉ‚ÄÉ**Target/Compile:** 36‚ÄÉ‚ÄÉ**JDK:** 21  
- **Gradle:** 8.13‚ÄÉ‚ÄÉ**AGP:** 8.6.1‚ÄÉ‚ÄÉ**Kotlin:** 1.9.25  
- **Compose Compiler:** 1.5.15‚ÄÉ‚ÄÉ**Compose BOM:** 2024.10.01  
- **Room:** 2.6.1‚ÄÉ‚ÄÉ**KSP:** 1.9.25-1.0.20  

> –í—Å–µ –≤–µ—Ä—Å–∏–∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã; –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å Compose ‚Üî Kotlin —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.

---

## 2) –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
–ò–µ—Ä–∞—Ä—Ö–∏—è –¥–∞–Ω–Ω—ã—Ö:  
**–ö–ª–∏–µ–Ω—Ç—ã ‚Üí –û–±—ä–µ–∫—Ç—ã (Sites) ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∫–∏ (Installations) ‚Üí –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Components)**  
+ –º–æ–¥—É–ª–∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è (Maintenance Sessions, Observations, Issues).

**Room Database v3**
- `@Database(version = 3, exportSchema = true)`  
- `MIGRATION_2_3` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, —ç–∫—Å–ø–æ—Ä—Ç —Å—Ö–µ–º –≤–∫–ª—é—á—ë–Ω  
- Enum-–ø–æ–ª—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ `Converters`

**–û—Å–Ω–æ–≤–Ω—ã–µ DAO:**  
`HierarchyDao`, `SessionsDao`, `TemplatesDao`, `ArchiveDao`, `ClientsDao`  

**–û—Å–Ω–æ–≤–Ω—ã–µ ViewModel:**  
`HierarchyViewModel`, `ClientsViewModel`, `MaintenanceViewModel`, `TemplatesViewModel`

---

## 3) UI (Compose)
### –≠–∫—Ä–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- **–ö–ª–∏–µ–Ω—Ç—ã:** `ClientsScreen` / `ClientsRoute`
  - –ù–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –≥—Ä—É–ø–ø–∞–º–∏ (`ClientGroupEntity`)
  - –í–∏–∑—É–∞–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø–ª–∞—à–µ–∫ –≥—Ä—É–ø–ø –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ (—Ü–≤–µ—Ç, –∏–∫–æ–Ω–∫–∏, –æ—Ç—Å—Ç—É–ø—ã)
  - –ò–∫–æ–Ω–∫–∏: `Group`, `Business`, `Person`
  - –ü–æ–¥—Å—á—ë—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´VIP (3)¬ª)
  - –¢—É–º–±–ª–µ—Ä *¬´–ö–æ—Ä–∑–∏–Ω–∞¬ª* –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Ä—Ö–∏–≤–æ–º
  - –î–∏–∞–ª–æ–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã –∏ –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞
- **–û–±—ä–µ–∫—Ç—ã:** `SitesScreen`, `SiteDetailScreen`  
- **–£—Å—Ç–∞–Ω–æ–≤–∫–∏:** `ComponentsScreen`  
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
  - –ö–Ω–æ–ø–∫–∞ **¬´–ü—Ä–æ–≤–µ—Å—Ç–∏ –¢–û¬ª** ‚Üí `MaintenanceAllScreen`
- **–¢–û:** `MaintenanceScreen`, `MaintenanceAllScreen` ‚Äî –≥–æ—Ç–æ–≤—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `saveSession(...)`

---

## 4) Soft-Delete (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ)
- –í `ClientEntity`:
  ```kotlin
  val isArchived: Boolean = false
  val archivedAtEpoch: Long? = null
  ```
- DAO —Ñ–∏–ª—å—Ç—Ä—É—é—Ç –∞—Ä—Ö–∏–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.  
- –í `ClientsScreen` –¥–æ–±–∞–≤–ª–µ–Ω —Ç—É–º–±–ª–µ—Ä *¬´–†–∞–±–æ—Ç–∞ —Å –∞—Ä—Ö–∏–≤–æ–º¬ª*.  
- –î–æ—Å—Ç—É–ø–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.  
- –õ–æ–≥–∏–∫–∞ soft-delete –æ—Ç–ª–∞–∂–µ–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ ViewModel –∏ UI.

---

## 5) –ù–æ–≤–æ–µ –≤ Handover #7
‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–±–Ω–æ–≤–ª—ë–Ω —ç–∫—Ä–∞–Ω **–ö–ª–∏–µ–Ω—Ç—ã**:  
- –î–æ–±–∞–≤–ª–µ–Ω—ã –≥—Ä—É–ø–ø—ã (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ, –ø–æ–¥—Å—á—ë—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤)  
- –ò–∫–æ–Ω–∫–∏ –≥—Ä—É–ø–ø –∏ –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏  
- –ï–¥–∏–Ω—ã–π –¥–∏–∞–ª–æ–≥ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞ —Å –≤—ã–±–æ—Ä–æ–º –≥—Ä—É–ø–ø—ã  
- –ê—Ä—Ö–∏–≤ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ —Ç—É–º–±–ª–µ—Ä –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏  
- –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∞ –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ `ClientsViewModel` –∏ `ClientsDao`  

‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É—Å—Ç–∞–Ω–æ–≤–æ–∫ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã (–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö template-—Å—Ç—Ä—É–∫—Ç—É—Ä).  
‚úÖ –ö–æ–¥–æ–≤–∞—è –±–∞–∑–∞ –æ—á–∏—â–µ–Ω–∞ –∏ —Å–ª–∏—Ç–∞ –≤ –≤–µ—Ç–∫—É `master`.  
‚úÖ –°–±–æ—Ä–∫–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞, –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (`Nav.kt`).  

---

## 6) –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `SessionsDao.saveSessionBundle()` –∏ –ø—Ä–æ–≤—è–∑–∫—É –≤ `MaintenanceViewModel.saveSession(...)`  
- [ ] –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Ä–∞–Ω **–ò—Å—Ç–æ—Ä–∏—è –¢–û**  
- [ ] –≠–∫—Å–ø–æ—Ä—Ç PDF –∏ `share`  
- [ ] –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —à–∞–±–ª–æ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`TemplatesScreen`)  
- [ ] –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é NUMBER-–ø–æ–ª–µ–π  
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è Room v4 –∏ —Ç–µ—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

---

## 7) –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –≤ **Android Studio Koala/Jellyfish+**  
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **JDK 21**  
3. `Build ‚Üí Clean Project ‚Üí Rebuild Project`  
4. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ `TemplateSeeder` —Å–æ–∑–¥–∞—ë—Ç –±–∞–∑–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã  
5. –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö Room/KSP ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å `.gradle`, `.kotlin`, `app/build`

---

## 8) Git-–≤–µ—Ç–≤–ª–µ–Ω–∏–µ
- –û—Å–Ω–æ–≤–Ω–∞—è –≤–µ—Ç–∫–∞: `master`  
- Feature-–≤–µ—Ç–∫–∏: `feature/<–Ω–∞–∑–≤–∞–Ω–∏–µ>`  
- Fix-–≤–µ—Ç–∫–∏: `fix/<–Ω–∞–∑–≤–∞–Ω–∏–µ>`  
- –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π Room ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç.  
- –ü–µ—Ä–µ–¥ —Å–ª–∏—è–Ω–∏–µ–º –≤–µ—Ç–∫–∏ ‚Üí –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ `commit + push + merge into current`.

---

## 9) –ü—Ä–∏–º–µ—á–∞–Ω–∏—è
- Enum-—Ç–∏–ø—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `data/types/`.  
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `AppDatabase.getInstance()`.  
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Compose ‚Üî Kotlin ‚Üî AGP –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∞; –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç–Ω–æ.  
- –í—Å–µ –∏–∫–æ–Ω–∫–∏ –∏ —Ü–≤–µ—Ç–∞ –≤ Material 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö ‚Äî —á–µ—Ä–µ–∑ `MaterialTheme.colorScheme`.

---

## 10) –§–æ–∫—É—Å —Å–ª–µ–¥—É—é—â–µ–≥–æ —á–µ–∫-–ø–æ–∏–Ω—Ç–∞ (Handover #8)
üéØ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤  
+ —ç–∫—Å–ø–æ—Ä—Ç –≤ PDF –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–π —Ü–µ–ø–æ—á–∫–∏ –¢–û.
